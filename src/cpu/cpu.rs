use crate::cpu::control::Control;
use super::register::Register;


pub struct CPU {
    pc: u16,
    sp: u16,
    registers: Register,
    cycles: u64,
}

impl CPU {
    pub fn new () -> Self {
        CPU {
            pc: 0x00,
            sp: 0x00,
            registers: Register::new(),
            cycles: 0,
        }
    }
    
    pub fn add_cycles(&mut self, c: u64){
        self.cycles += c;
    }

    pub fn decode(&mut self, opcode: u8) {
        let x: u8 = (opcode & 0b11000000) >> 6; //instruction
        let y: u8 = (opcode & 0b00111000) >> 3; //op1
        let z: u8 = opcode & 0b00000111; //op2

        dbg!(x,y,z);

        match(x,y,z){
            (0, 0, 0) => Control::nop(self), //0x00
            (0, 0, 1) => Control::ld_bc_n16(self), //0x01
            (0, 0, 2) => Control::ld_bc_a(self),
            (0, 0, 3) => todo!(),
            (0, 0, 4) => todo!(),
            (0, 0, 5) => todo!(),
            (0, 0, 6) => todo!(),
            (0, 0, 7) => todo!(),
            (0, 1, 0) => todo!(),
            (0, 1, 1) => todo!(),
            (0, 1, 2) => todo!(),
            (0, 1, 3) => todo!(),
            (0, 1, 4) => todo!(),
            (0, 1, 5) => todo!(),
            (0, 1, 6) => todo!(),
            (0, 1, 7) => todo!(),
            
            (0, 2, 0) => todo!(),
            (0, 2, 1) => todo!(),
            (0, 2, 2) => todo!(),
            (0, 2, 3) => todo!(),
            (0, 2, 4) => todo!(),
            (0, 2, 5) => todo!(),
            (0, 2, 6) => todo!(),
            (0, 2, 7) => todo!(),
            (0, 3, 0) => todo!(),
            (0, 3, 1) => todo!(),
            (0, 3, 2) => todo!(),
            (0, 3, 3) => todo!(),
            (0, 3, 4) => todo!(),
            (0, 3, 5) => todo!(),
            (0, 3, 6) => todo!(),
            (0, 3, 7) => todo!(),
            
            (0, 4, 0) => todo!(),
            (0, 4, 1) => todo!(),
            (0, 4, 2) => todo!(),
            (0, 4, 3) => todo!(),
            (0, 4, 4) => todo!(),
            (0, 4, 5) => todo!(),
            (0, 4, 6) => todo!(),
            (0, 4, 7) => todo!(),
            (0, 5, 0) => todo!(),
            (0, 5, 1) => todo!(),
            (0, 5, 2) => todo!(),
            (0, 5, 3) => todo!(),
            (0, 5, 4) => todo!(),
            (0, 5, 5) => todo!(),
            (0, 5, 6) => todo!(),
            (0, 5, 7) => todo!(),
            
            (0, 6, 0) => todo!(),
            (0, 6, 1) => todo!(),
            (0, 6, 2) => todo!(),
            (0, 6, 3) => todo!(),
            (0, 6, 4) => todo!(),
            (0, 6, 5) => todo!(),
            (0, 6, 6) => todo!(),
            (0, 6, 7) => todo!(),
            (0, 7, 0) => todo!(),
            (0, 7, 1) => todo!(),
            (0, 7, 2) => todo!(),
            (0, 7, 3) => todo!(),
            (0, 7, 4) => todo!(),
            (0, 7, 5) => todo!(),
            (0, 7, 6) => todo!(),
            (0, 7, 7) => todo!(),
            
            (1, 0, 0) => todo!(),
            (1, 0, 1) => todo!(),
            (1, 0, 2) => todo!(),
            (1, 0, 3) => todo!(),
            (1, 0, 4) => todo!(),
            (1, 0, 5) => todo!(),
            (1, 0, 6) => todo!(),
            (1, 0, 7) => todo!(),
            (1, 1, 0) => todo!(),
            (1, 1, 1) => todo!(),
            (1, 1, 2) => todo!(),
            (1, 1, 3) => todo!(),
            (1, 1, 4) => todo!(),
            (1, 1, 5) => todo!(),
            (1, 1, 6) => todo!(),
            (1, 1, 7) => todo!(),
            
            (1, 2, 0) => todo!(),
            (1, 2, 1) => todo!(),
            (1, 2, 2) => todo!(),
            (1, 2, 3) => todo!(),
            (1, 2, 4) => todo!(),
            (1, 2, 5) => todo!(),
            (1, 2, 6) => todo!(),
            (1, 2, 7) => todo!(),
            (1, 3, 0) => todo!(),
            (1, 3, 1) => todo!(),
            (1, 3, 2) => todo!(),
            (1, 3, 3) => todo!(),
            (1, 3, 4) => todo!(),
            (1, 3, 5) => todo!(),
            (1, 3, 6) => todo!(),
            (1, 3, 7) => todo!(),
            
            (1, 4, 0) => todo!(),
            (1, 4, 1) => todo!(),
            (1, 4, 2) => todo!(),
            (1, 4, 3) => todo!(),
            (1, 4, 4) => todo!(),
            (1, 4, 5) => todo!(),
            (1, 4, 6) => todo!(),
            (1, 4, 7) => todo!(),
            (1, 5, 0) => todo!(),
            (1, 5, 1) => todo!(),
            (1, 5, 2) => todo!(),
            (1, 5, 3) => todo!(),
            (1, 5, 4) => todo!(),
            (1, 5, 5) => todo!(),
            (1, 5, 6) => todo!(),
            (1, 5, 7) => todo!(),
            
            (1, 6, 0) => todo!(),
            (1, 6, 1) => todo!(),
            (1, 6, 2) => todo!(),
            (1, 6, 3) => todo!(),
            (1, 6, 4) => todo!(),
            (1, 6, 5) => todo!(),
            (1, 6, 6) => todo!(),
            (1, 6, 7) => todo!(),
            (1, 7, 0) => todo!(),
            (1, 7, 1) => todo!(),
            (1, 7, 2) => todo!(),
            (1, 7, 3) => todo!(),
            (1, 7, 4) => todo!(),
            (1, 7, 5) => todo!(),
            (1, 7, 6) => todo!(),
            (1, 7, 7) => todo!(),
            
            (2, 0, 0) => todo!(),
            (2, 0, 1) => todo!(),
            (2, 0, 2) => todo!(),
            (2, 0, 3) => todo!(),
            (2, 0, 4) => todo!(),
            (2, 0, 5) => todo!(),
            (2, 0, 6) => todo!(),
            (2, 0, 7) => todo!(),
            (2, 1, 0) => todo!(),
            (2, 1, 1) => todo!(),
            (2, 1, 2) => todo!(),
            (2, 1, 3) => todo!(),
            (2, 1, 4) => todo!(),
            (2, 1, 5) => todo!(),
            (2, 1, 6) => todo!(),
            (2, 1, 7) => todo!(),
            
            (2, 2, 0) => todo!(),
            (2, 2, 1) => todo!(),
            (2, 2, 2) => todo!(),
            (2, 2, 3) => todo!(),
            (2, 2, 4) => todo!(),
            (2, 2, 5) => todo!(),
            (2, 2, 6) => todo!(),
            (2, 2, 7) => todo!(),
            (2, 3, 0) => todo!(),
            (2, 3, 1) => todo!(),
            (2, 3, 2) => todo!(),
            (2, 3, 3) => todo!(),
            (2, 3, 4) => todo!(),
            (2, 3, 5) => todo!(),
            (2, 3, 6) => todo!(),
            (2, 3, 7) => todo!(),
            
            (2, 4, 0) => todo!(),
            (2, 4, 1) => todo!(),
            (2, 4, 2) => todo!(),
            (2, 4, 3) => todo!(),
            (2, 4, 4) => todo!(),
            (2, 4, 5) => todo!(),
            (2, 4, 6) => todo!(),
            (2, 4, 7) => todo!(),
            (2, 5, 0) => todo!(),
            (2, 5, 1) => todo!(),
            (2, 5, 2) => todo!(),
            (2, 5, 3) => todo!(),
            (2, 5, 4) => todo!(),
            (2, 5, 5) => todo!(),
            (2, 5, 6) => todo!(),
            (2, 5, 7) => todo!(),
            
            (2, 6, 0) => todo!(),
            (2, 6, 1) => todo!(),
            (2, 6, 2) => todo!(),
            (2, 6, 3) => todo!(),
            (2, 6, 4) => todo!(),
            (2, 6, 5) => todo!(),
            (2, 6, 6) => todo!(),
            (2, 6, 7) => todo!(),
            (2, 7, 0) => todo!(),
            (2, 7, 1) => todo!(),
            (2, 7, 2) => todo!(),
            (2, 7, 3) => todo!(),
            (2, 7, 4) => todo!(),
            (2, 7, 5) => todo!(),
            (2, 7, 6) => todo!(),
            (2, 7, 7) => todo!(),
            
            (3, 0, 0) => todo!(),
            (3, 0, 1) => todo!(),
            (3, 0, 2) => todo!(),
            (3, 0, 3) => todo!(),
            (3, 0, 4) => todo!(),
            (3, 0, 5) => todo!(),
            (3, 0, 6) => todo!(),
            (3, 0, 7) => todo!(),
            (3, 1, 0) => todo!(),
            (3, 1, 1) => todo!(),
            (3, 1, 2) => todo!(),
            (3, 1, 3) => todo!(),
            (3, 1, 4) => todo!(),
            (3, 1, 5) => todo!(),
            (3, 1, 6) => todo!(),
            (3, 1, 7) => todo!(),
            
            (3, 2, 0) => todo!(),
            (3, 2, 1) => todo!(),
            (3, 2, 2) => todo!(),
            (3, 2, 3) => todo!(),
            (3, 2, 4) => todo!(),
            (3, 2, 5) => todo!(),
            (3, 2, 6) => todo!(),
            (3, 2, 7) => todo!(),
            (3, 3, 0) => todo!(),
            (3, 3, 1) => todo!(),
            (3, 3, 2) => todo!(),
            (3, 3, 3) => todo!(),
            (3, 3, 4) => todo!(),
            (3, 3, 5) => todo!(),
            (3, 3, 6) => todo!(),
            (3, 3, 7) => todo!(),
            
            (3, 4, 0) => todo!(),
            (3, 4, 1) => todo!(),
            (3, 4, 2) => todo!(),
            (3, 4, 3) => todo!(),
            (3, 4, 4) => todo!(),
            (3, 4, 5) => todo!(),
            (3, 4, 6) => todo!(),
            (3, 4, 7) => todo!(),
            (3, 5, 0) => todo!(),
            (3, 5, 1) => todo!(),
            (3, 5, 2) => todo!(),
            (3, 5, 3) => todo!(),
            (3, 5, 4) => todo!(),
            (3, 5, 5) => todo!(),
            (3, 5, 6) => todo!(),
            (3, 5, 7) => todo!(),
            
            (3, 6, 0) => todo!(),
            (3, 6, 1) => todo!(),
            (3, 6, 2) => todo!(),
            (3, 6, 3) => todo!(),
            (3, 6, 4) => todo!(),
            (3, 6, 5) => todo!(),
            (3, 6, 6) => todo!(),
            (3, 6, 7) => todo!(),
            (3, 7, 0) => todo!(),
            (3, 7, 1) => todo!(),
            (3, 7, 2) => todo!(),
            (3, 7, 3) => todo!(),
            (3, 7, 4) => todo!(),
            (3, 7, 5) => todo!(),
            (3, 7, 6) => todo!(),
            (3, 7, 7) => todo!(),
            
            _ => panic!("NOT IMPLEMENTED")
        }
    }

}